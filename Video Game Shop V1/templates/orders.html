{% extends 'base.html' %}{% block content %}

<div class="container">
  <h1 class="platformTitle">Your Orders</h1>
  <hr />
</div>

<div class="container">
  {% if orders %} {% for order in orders %}
  <h4 class="text-white mt-5">
    Order Placed: {{ order.ordered_date }} -
    <span class="badge badge-pill badge-primary"
      >Status: {{ order.get_order_status_display }}</span
    >
    -
    <a
      href="{{ order.get_generate_invoice_url }}"
      class="badge badge-pill badge-success"
      >Generate Invoice</a
    >
  </h4>

  <table class="table table-dark shadow-lg ">
    <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Title</th>
        <th scope="col">Price</th>
        <th scope="col">Quantity</th>
        <th scope="col">Total Price</th>
      </tr>
    </thead>
    <tbody>
      {% for order_item in order.games.all %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        <td>{{ order_item.game.title }}</td>
        <td>{{ order_item.game.price_per_unit }}</td>
        <td>
          {{ order_item.quantity }}
        </td>
        <td>${{ order_item.get_total_cart_item_price }}</td>
      </tr>
      {% endfor %}
      <tr>
        <th scope="row"><b>Order Total</b></th>
        <td></td>
        <td></td>
        <td></td>
        <td>
          <b>${{ order.get_total_cart_price }}</b>
        </td>
      </tr>
    </tbody>
  </table>
  {% endfor %} {% else %}
  <h2 class="mt-5 text-white text-center">You have no recent orders</h2>
  {% endif %}
</div>
{% endblock %}
